<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Card Finder</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-grid class="image-picker-container">
    <ion-row *ngIf="!photo" class="ion-align-items-center ion-justify-content-center mid-col ">
      <ion-col size="12" class="ion-text-center">
        <div class="ion-activatable ripple-parent rectangle" (click)="takePicture()">
          <div class="ripple-text">Select an Image</div>
          <ion-ripple-effect>
            <p>aaaa</p>
          </ion-ripple-effect>
        </div>
      </ion-col>
    </ion-row>



    <ion-row>
      <ion-col size-md="6" size-xs="12">
        <ion-card *ngIf="photo" class="captured-card">
          <ion-list *ngIf="card">
            <ion-item>

              <img alt="Card Image" [src]="card.card_images[0].image_url_small" class="small-card-img" />


              <ion-label>
                <h2>{{ card.name }} [{{searchResult.language | uppercase}}]</h2>
                <p *ngIf="set"> {{set.set_code }} | {{set.set_rarity }} | {{set.set_price }} â‚¬</p>
                <p *ngIf="!set"> Set information not detected. Card has {{card.card_sets.length}} Prints.</p>
              </ion-label>
            </ion-item>
          </ion-list>
          <ion-img [src]="photo" alt="Captured Photo"></ion-img>
          <ion-card-header>
            <ion-card-title>OCR Result</ion-card-title>
          </ion-card-header>
          <ion-card-content>

            {{ searchResult | json }}

          </ion-card-content>

          <ion-spinner color="primary" *ngIf="processing"></ion-spinner>
          <p class="processing-text" *ngIf="processing">Processing...</p>

        </ion-card>
      </ion-col>

      <ion-col *ngIf="card" size-md="6" size-xs="12">
        <ion-card class="card-details-card">
          <ion-img [src]="card.card_images[0].image_url" alt="Card Image"></ion-img>
          <ion-card-header>
            <ion-card-title>{{ card.name }}</ion-card-title>
            <ion-card-subtitle>Language: {{searchResult.language | uppercase}}</ion-card-subtitle>
          </ion-card-header>
          <ion-card-content>

            <!-- Display card details -->
            <ion-list>
              <ion-item *ngFor="let price of card.card_prices">
                <ion-label>cardmarket price : {{ price.cardmarket_price }}</ion-label>
              </ion-item>
              <ion-item *ngFor="let price of card.card_prices">
                <ion-label>tcgplayer price : {{ price.tcgplayer_price}}</ion-label>

              </ion-item>

            </ion-list>

          </ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>

    <ion-row *ngIf="searchResult">
      <ion-col size-md="5" size-xs="12">
        <ion-card class="json-result-card">
          <ion-card-header>
            <ion-card-title>OCR Result</ion-card-title>
          </ion-card-header>
          <ion-card-content>{{ searchResult | json }}</ion-card-content>
        </ion-card>
      </ion-col>
    </ion-row>
  </ion-grid>

  <ion-fab vertical="bottom" horizontal="end" (click)="takePicture()">
    <ion-fab-button color="light">
      <ion-icon name="image-outline"></ion-icon>
    </ion-fab-button>

  </ion-fab>
</ion-content>